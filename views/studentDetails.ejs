<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h3 mb-0 d-flex align-items-center gap-2">
    <i class="bi bi-person-circle"></i> Student Details
  </h1>
  <div class="d-flex gap-2">
    <a href="/students/<%= student._id %>/edit" class="btn btn-primary">
      <i class="bi bi-pencil me-1"></i>Edit
    </a>
    <button class="btn btn-danger" type="button" data-bs-toggle="modal" data-bs-target="#confirmDeleteModal">
      <i class="bi bi-trash me-1"></i>Delete
    </button>
  </div>
</div>

<% if (typeof flashMsg !== 'undefined' && flashMsg) { %>
  <div class="alert alert-info alert-dismissible fade show" role="alert">
    Student updated successfully.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% } %>

<div class="row">
  <div class="col-md-8">
    <div class="card shadow-sm">
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label fw-bold text-muted">Full Name</label>
            <p class="form-control-plaintext fs-5"><%= student.name %></p>
          </div>
          
          <div class="col-md-6">
            <label class="form-label fw-bold text-muted">Roll Number</label>
            <p class="form-control-plaintext fs-5"><%= student.rollNumber %></p>
          </div>
          
          <div class="col-md-6">
            <label class="form-label fw-bold text-muted">Email</label>
            <p class="form-control-plaintext fs-5">
              <a href="mailto:<%= student.email %>"><%= student.email %></a>
            </p>
          </div>
          
          <div class="col-md-6">
            <label class="form-label fw-bold text-muted">Department</label>
            <p class="form-control-plaintext fs-5">
              <span class="badge bg-primary fs-6"><%= student.department %></span>
            </p>
          </div>
          
          <div class="col-md-6">
            <label class="form-label fw-bold text-muted">GPA</label>
            <p class="form-control-plaintext fs-5">
              <span class="badge text-bg-light fs-6"><%= student.gpa.toFixed(2) %></span>
            </p>
          </div>
          
          <div class="col-md-6">
            <label class="form-label fw-bold text-muted">Student Since</label>
            <p class="form-control-plaintext fs-6">
              <%= new Date(student.createdAt).toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
              }) %>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-md-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Quick Actions</h5>
        <div class="d-grid gap-2">
          <a href="/students" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-1"></i>Back to List
          </a>
          <a href="/students/new" class="btn btn-outline-primary">
            <i class="bi bi-person-plus me-1"></i>Add New Student
          </a>
        </div>
      </div>
    </div>
    
    <div class="card shadow-sm mt-3">
      <div class="card-body">
        <h6 class="card-title">Academic Performance</h6>
        <div class="text-center">
          <div class="display-4 fw-bold text-primary"><%= student.gpa.toFixed(2) %></div>
          <p class="text-muted mb-0">Current GPA</p>
          <% if (student.gpa >= 3.5) { %>
            <span class="badge bg-success mt-2">Excellent</span>
          <% } else if (student.gpa >= 3.0) { %>
            <span class="badge bg-info mt-2">Good</span>
          <% } else if (student.gpa >= 2.0) { %>
            <span class="badge bg-warning mt-2">Satisfactory</span>
          <% } else { %>
            <span class="badge bg-danger mt-2">Needs Improvement</span>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmDeleteLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete <strong><%= student.name %></strong>? This action cannot be undone.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <form method="post" action="/students/<%= student._id %>?_method=DELETE">
          <button type="submit" class="btn btn-danger">Delete Student</button>
        </form>
      </div>
    </div>
  </div>
</div>
